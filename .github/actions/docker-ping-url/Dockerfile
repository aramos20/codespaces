FROM python:alpine3.19 AS base

# Configurar el directorio de trabajo
WORKDIR /app

# Copiar las dependencias
COPY requirements.txt .

# Instalar herramientas de compilaci贸n necesarias para paquetes como numpy y OpenCV
RUN apk add --no-cache \
  gcc g++ make musl-dev python3-dev libffi-dev openssl-dev \
  cmake jpeg-dev zlib-dev freetype-dev tiff-dev libpng-dev openblas-dev py3-setuptools

# Verificar la versi贸n de Python
RUN python -V

# Instalar dependencias de Python
RUN pip install --no-cache-dir --upgrade pip setuptools wheel
RUN pip install --no-cache-dir -r requirements.txt

# Copiar el resto del c贸digo fuente
COPY . .

# Comando de ejecuci贸n del contenedor
CMD ["python", "/app/main.py"]
